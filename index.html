<html>
    <head>
        <link href='https://fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css" integrity="sha512-EZLkOqwILORob+p0BXZc+Vm3RgJBOe1Iq/0fiI7r/wJgzOFZMlsqTa29UEl6v6U6gsV4uIpsNZoV32YZqrCRCQ==" crossorigin="anonymous" />
        <style>
            table {
                border-collapse:collapse;
            }
            body { margin: 0 10; }
            fieldset {
                overflow: hidden;
            }
    
            .radio-button-container {
            float: left;
            clear: none;
            }
    
            label {
            float: left;
            clear: none;
            display: block;
            padding: 0px 1em 0px 8px;
            }
    
            input[type=radio],
            input.radio {
            float: left;
            clear: none;
            margin: 2px 0 0 2px;
            }

            .showCell { display: table-cell; }
            .hideCell { display: none; }
            
        </style>
    </head>
    <body>
        <div id="root"></div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"></script>
        <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
        <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
        <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
        <script src="./data/us_records.json"></script>
        <script type="text/babel">
        function StatesTable({showCasesOrDeaths}) {
            const [statesData, setStatesData] = React.useState(US_RECORDS);
            const statesRows = statesData.map((record) => { 
                return(
                    <tr key={record["State"]}>
                        <th>{record["State"]}</th>
                        <td className={['cases','casesAndDeaths'].includes(showCasesOrDeaths) ? 'showCell' : 'hideCell'}>{record["NewCases"]}</td>
                        <td className={['deaths','casesAndDeaths'].includes(showCasesOrDeaths) ? 'showCell' : 'hideCell'}>{record["NewDeaths"]}</td>
                        <td>{record["NewCases_prev6wk"]}</td>
                        <td>{record["NewDeaths_prev6wk"]}</td>
                        <td>{record["NewCases_next6wk"]}</td>
                        <td>{record["NewDeaths_next6wk"]}</td>
                        <td>{record["Cases"]}</td>
                        <td>{record["Deaths"]}</td>
                        <td>{record["Cases_pctPop"]}</td>
                        <td>{record["Deaths_pctPop"]}</td>
                        <td>{record["Population"]}</td>
                        <td>{record["Governor"]}</td>
                    </tr>); 
            });
            
            return (
                <table className="u-full-width">
                    <thead>
                        <tr>
                            <th rowSpan="2"></th>
                            <th colSpan={['casesAndDeaths'].includes(showCasesOrDeaths) ? '2' : '1'}>Daily New</th>
                            <th colSpan="2">Past 6 Weeks</th>
                            <th colSpan="2">Next # Weeks</th>
                            <th colSpan="2">Total</th>
                            <th colSpan="2">% of Population</th>
                            <th rowSpan="2">Population</th>
                            <th rowSpan="2">Governor</th>
                        </tr>
                        <tr>
                            <th className={['cases','casesAndDeaths'].includes(showCasesOrDeaths) ? 'showCell' : 'hideCell'}>Cases</th>
                            <th className={['deaths','casesAndDeaths'].includes(showCasesOrDeaths) ? 'showCell' : 'hideCell'}>Deaths</th>
                            <th>Cases</th>
                            <th>Deaths</th>
                            <th>Cases</th>
                            <th>Deaths</th>
                            <th>Cases</th>
                            <th>Deaths</th>
                            <th>Cases</th>
                            <th>Deaths</th>
                        </tr>                      
                    </thead>
                    <tbody>
                        {statesRows}
                    </tbody>
                </table>
            )
        }
        function App () {

            const Heading1 = () => <h1>COVID <span style={{color: "red"}}>Red</span> and <span style={{color: "blue"}}>Blue</span></h1>;
            function onChangeCasesOrDeaths(event) {
                setCasesOrDeaths(event.target.value);
            }

            const [casesOrDeaths, setCasesOrDeaths] = React.useState('casesAndDeaths');

            const SelectCasesOrDeaths = () => {
                return (
                    <fieldset>
                    <div className="radio-button-container">
                        <legend>Cases, Deaths, or Both</legend>
                        <input id="cases" type="radio" name="casesDeaths" value="cases" onChange={onChangeCasesOrDeaths} checked={casesOrDeaths == 'cases' ? true : false}/><label htmlFor="cases">Cases</label>
                        <input id="deaths" type="radio" name="casesDeaths" value="deaths" onChange={onChangeCasesOrDeaths} checked={casesOrDeaths == 'deaths' ? true : false} /><label htmlFor="deaths">Deaths</label>
                        <input id="casesAndDeaths" type="radio" name="casesDeaths" value="casesAndDeaths" onChange={onChangeCasesOrDeaths} checked={casesOrDeaths == 'casesAndDeaths' ? true : false} /><label htmlFor="casesAndDeaths">Both</label>
                    </div>
                    </fieldset>
                )
            }
            return (<><Heading1 /><SelectCasesOrDeaths /><StatesTable showCasesOrDeaths={casesOrDeaths}  /></>)
        }
        ReactDOM.render(<App />, document.getElementById('root'));
        </script>
    </body>
</html>